using Plots

data = [
    (3, 3, 2, 3, 0.5779, [0.8741996885274269, 0.8800830593528292]),
    (3, 3, 2, 3, 0.5715, [0.857567804024497, 0.8902887139107611]),
    (3, 3, 2, 3, 0.5785, [0.8717372515125325, 0.8857389801210026]),
    (6, 3, 2, 3, 0.2442, [0.8738738738738738, 0.916052416052416]),
    (6, 3, 2, 3, 0.2108, [0.9112903225806451, 0.8994307400379506]),
    (6, 3, 2, 3, 0.3524, [0.9216799091940976, 0.9236662883087401]),
    (9, 3, 2, 3, 0.1576, [0.8991116751269036, 0.9321065989847716]),
    (9, 3, 2, 3, 0.1866, [0.8542336548767417, 0.9265809217577706]),
    (9, 3, 2, 3, 0.013, [0.9230769230769231, 0.8538461538461538]),
    (12, 3, 2, 3, 0.1101, [0.8919164396003633, 0.9282470481380564]),
    (12, 3, 2, 3, 0.1416, [0.9004237288135594, 0.8305084745762712]),
    (12, 3, 2, 3, 0.1244, [0.8553054662379421, 0.822347266881029]),
    (15, 3, 2, 3, 0.0352, [0.7982954545454546, 0.9659090909090909]),
    (15, 3, 2, 3, 0.0954, [0.9192872117400419, 0.8291404612159329]),
    (15, 3, 2, 3, 0.0019, [0.9473684210526315, 0.9473684210526315]),
    (6, 3, 2, 4, 0.3073, [0.914741295151318, 0.9176700292873413]),
    (6, 3, 2, 4, 0.2402, [0.8659450457951707, 0.9604496253122398]),
    (6, 3, 2, 4, 0.2661, [0.9060503570086433, 0.9218338970311912]),
    (9, 3, 2, 4, 0.1562, [0.9353393085787451, 0.8060179257362355]),
    (9, 3, 2, 4, 0.123, [0.9439024390243902, 0.9560975609756097]),
    (9, 3, 2, 4, 0.1954, [0.9119754350051177, 0.9216990788126919]),
    (12, 3, 2, 4, 0.1278, [0.8896713615023474, 0.905320813771518]),
    (12, 3, 2, 4, 0.0208, [0.9567307692307693, 0.8557692307692307]),
    (12, 3, 2, 4, 0.1005, [0.882587064676617, 0.9482587064676616]),
    (15, 3, 2, 4, 0.1098, [0.9034608378870674, 0.8296903460837887]),
    (15, 3, 2, 4, 0.0046, [0.9130434782608695, 0.8695652173913043]),
    (15, 3, 2, 4, 0.0244, [0.9221311475409836, 0.8647540983606558]),
    (6, 3, 2, 5, 0.3243, [0.9152019734813445, 0.9337033610854147]),
    (6, 3, 2, 5, 0.245, [0.9032653061224489, 0.9481632653061225]),
    (6, 3, 2, 5, 0.2433, [0.9399917796958488, 0.948623099054665]),
    (9, 3, 2, 5, 0.164, [0.9121951219512195, 0.9457317073170731]),
    (9, 3, 2, 5, 0.1503, [0.9328010645375915, 0.9607451763140386]),
    (9, 3, 2, 5, 0.1819, [0.9345794392523364, 0.959868059373282]),
    (12, 3, 2, 5, 0.1133, [0.911738746690203, 0.93909973521624]),
    (12, 3, 2, 5, 0.0401, [0.9326683291770573, 0.9376558603491272]),
    (12, 3, 2, 5, 0.124, [0.8935483870967742, 0.9129032258064517]),
    (15, 3, 2, 5, 0.0713, [0.9158485273492286, 0.9298737727910238]),
    (15, 3, 2, 5, 0.0244, [0.9262295081967213, 0.9057377049180327]),
    (15, 3, 2, 5, 0.0912, [0.8991228070175439, 0.930921052631579])
]



# colors and shapes
colors = [:blue, :red, :green, :purple, :orange]
shapes = [:circle, :square, :diamond, :star, :utriangle]

legend_added = Dict()

p = plot(legend=:outertopright, xlabel="Fidelity", ylabel="Success", title="Scatter Plot of Success vs Fidelity")

for (n, _, _, r, success, fidelities) in data
    label = "n=$n, r=$r"
    if !haskey(legend_added, label)
        legend_added[label] = true
    else
        label = ""
    end
    for fidelity in fidelities
        scatter!(p, [fidelity], [success], label=label, markershape=shapes[(r % length(shapes)) + 1], color=colors[(n % length(colors)) + 1])
    end
end

display(p)